<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NC RO Gen Service</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- SweetAlert2 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet">

    <link rel="stylesheet" href="/css/common.css">

    <!-- DataTables CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.12.1/css/jquery.dataTables.min.css">

    <!-- jQuery (required by DataTables) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- DataTables JS -->
    <script src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>

</head>
<body>
<!-- Header Section -->
<header class="bg-primary text-white py-3">
    <div class="container d-flex justify-content-between align-items-center">
        <img src="/images/gc.png" alt="Left Logo" class="img-fluid" style="max-height: 50px;">
        <h1 class="text-center mb-0">NC RO GENERATION SERVICE</h1>
        <img src="/images/nc.png" alt="Right Logo" class="img-fluid" style="max-height: 50px;">
    </div>
</header>

<!-- Navigation Bar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-secondary">
    <div class="container">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav nav-tabs" role="tablist">
                <li class="nav-item">
                    <a class="nav-link text-dark active" data-bs-toggle="tab" href="#uploadRates" role="tab">Upload New Master Rates</a>
                </li>

                <!-- Navigation Tab for "View Master" -->
                <li class="nav-item">
                    <a class="nav-link text-dark" id="viewMasterTab" data-bs-toggle="tab" href="#viewRates" role="tab">View Master</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link text-dark" data-bs-toggle="tab" href="#createRo" role="tab">Create RO</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link text-dark" id="previewRoTab" data-bs-toggle="tab" href="#previewRo" role="tab">Preview RO</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link text-dark" data-bs-toggle="tab" href="#addClient" role="tab">Add Client</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link text-dark" data-bs-toggle="tab" href="#generateRO" role="tab">Generate RO For Release</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-dark" data-bs-toggle="tab" href="#services" role="tab">Services</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-dark" data-bs-toggle="tab" href="#contact" role="tab">Contact</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- Tab Content -->
<div class="container-fluid mt-4">
    <div class="tab-content">
        <!-- Upload New Master Rates Tab (Completed Not To Be Changes Done AnyMore)-->
        <div class="tab-pane fade show active" id="uploadRates" role="tabpanel">
            <h2>Upload New Master Rates</h2>
            <p>This is where you can upload new master rates for your service.</p>
            <form id="fileUploadForm" class="mb-4">
                <div class="mb-3">
                    <label for="fileInput" class="form-label">Upload File (.csv, .xls, .xlsx):</label>
                    <input type="file" id="fileInput" class="form-control" accept=".csv, .xls, .xlsx" required>
                </div>
                <button type="submit" class="btn btn-primary">Upload and Display</button>
            </form>

            <!-- Display File Content -->
            <div id="fileContent" class="table-responsive">
                <table class="table table-sm table-bordered table-responsive" id="dataTable">
                    <thead></thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <!-- View Master Content -->
        <div class="tab-pane fade" id="viewRates" role="tabpanel">
            <div class="container-fluid">
                <h2>View Master</h2>

                <!-- Table (Initially hidden) -->
                <div id="tableContainer" style="display: none;">
                    <table class="table table-sm table-responsive table-bordered table-striped" style="width: 100% !important;" id="newspapersTable">
                        <thead>
                        <tr>
                            <th>News Paper Code</th>
                            <th>News Paper Name</th>
                            <th>Last Renewed Date</th>
                            <th>State</th>
                            <th>Place Of Publication</th>
                            <th>Language</th>
                            <th>Periodicity</th>
                            <th>Category</th>
                            <th>Regularity Status</th>
                            <th>Circulation Base</th>
                            <th>Circulation</th>
                            <th>Rate</th>
                        </tr>
                        </thead>
                        <tbody id="viewTable">
                        <!-- Data will be filled here dynamically -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Create Ro-->
        <div class="tab-pane fade" id="createRo" role="tabpanel">
            <div class="container-fluid">
                <h2>Create RO</h2>
                <div  >
                    <div class="container-fluid">
                        <form>
                            <div class="row">
                                <!-- DAV (Hidden Field) -->
                                <div class="col-md-3 mb-3" >
                                    <div class="input-group">
                                        <span class="input-group-text">Dav</span>
                                        <input type="text" class="form-control uppercase" name="dav" id="dav" placeholder="Data will Pre Filled" readonly required>
                                    </div>
                                </div>

                                <!-- Client Name -->
                                <div class="col-md-3 mb-3">
                                    <div class="input-group">
                                        <span class="input-group-text">Client Name</span>
                                        <input type="text" class="form-control uppercase" name="clientName" id="clientName" required>
                                    </div>
                                </div>

                                <!-- Page Number -->
                                <div class="col-md-3 mb-3">
                                    <div class="input-group">
                                        <span class="input-group-text">Page Number</span>
                                        <input type="text" class="form-control" name="pageNumber" id="pageNumber" required>
                                    </div>
                                </div>

                                <!-- Newspaper Name -->
                                <div class="col-md-3 mb-3">
                                    <div class="input-group">
                                        <span class="input-group-text">Newspaper Name</span>
                                        <select class="form-select" name="newspaperName" id="newspaperName" required onchange="fetchStates();fetchPublicationName();fetchLanguage();fetchPeriodicity();fetchCategory()">
                                            <option value="" selected disabled>Select Newspaper</option>
                                            <option th:each="name : ${newsPaperName}" th:value="${name}" th:text="${name}"></option>
                                        </select>
                                    </div>
                                </div>

                                <!-- State -->
                                <div class="col-md-3 mb-3">
                                    <div class="input-group">
                                        <span class="input-group-text">State</span>
                                        <select class="form-select" required name="state" onchange="fetchPublicationName()" id="stateDropdown">
                                            <option value="" selected disabled>Select State</option>
                                        </select>
                                    </div>
                                </div>

                                <!-- Edition -->
                                <div class="col-md-3 mb-3">
                                    <div class="input-group">
                                        <span class="input-group-text">Edition</span>
                                        <select class="form-select" required name="placeOfPublication" id="placeOfPublication" onchange="fetchLanguage()">
                                            <option value="" selected disabled>Select Edition</option>
                                        </select>
                                    </div>
                                </div>

                                <!-- Language -->
                                <div class="col-md-3 mb-3">
                                    <div class="input-group">
                                        <span class="input-group-text">Language</span>
                                        <select class="form-select" required name="language" id="language">
                                            <option value="" selected disabled>Select Language</option>
                                        </select>
                                    </div>
                                </div>

                                <!-- Colour -->
                                <div class="col-md-3 mb-3">
                                    <div class="input-group">
                                        <span class="input-group-text">Colour</span>
                                        <select class="form-select" required name="color" id="color">
                                            <option value="" selected disabled>Select Color</option>
                                            <option value="B/W">B/W</option>
                                            <option value="Color">Color</option>
                                        </select>
                                    </div>
                                </div>

                                <!-- GST -->
                                <div class="col-md-3 mb-3">
                                    <div class="input-group">
                                        <span class="input-group-text">GST Applicable</span>
                                        <select class="form-select" required name="gstType" id="gstType">
                                            <option value="" selected disabled>Select GST</option>
                                            <option value="IGST">IGST</option>
                                            <option value="CGST">CGST</option>
                                        </select>
                                    </div>
                                </div>


                                    <div class="col-md-3 mb-3" id="periodicityDropDown" style="display: none ">
                                        <div class="input-group highlight">
                                            <span class="input-group-text highlight">Periodicity</span>
                                            <select class="form-select highlight" required name="periodicity" id="periodicity" onchange="fetchCategory()">
                                                <option value="" selected disabled>Select Periodicity</option>

                                            </select>
                                        </div>
                                    </div>

                                    <div class="col-md-3 mb-3" id="categoryDropDown" style="display: none ">
                                        <div class="input-group highlight" >
                                            <span class="input-group-text highlight" >Category</span>
                                            <select class="form-select highlight" required name="category" id="category">
                                                <option value="" selected disabled>Select Category</option>

                                            </select>
                                        </div>
                                    </div>


                                <!-- Date -->
                                <div class="col-md-3 mb-3" >
                                    <div class="input-group">
                                        <span class="input-group-text">Date</span>
                                        <input type="date" class="form-control" id="dateInput" name="date" />
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>

                    <table class="table table-sm table-responsive table-bordered" style="width: 100% !important;">
                        <thead>
                        <tr>

                            <th rowspan="2">Action</th>
                            <th rowspan="2">Submission Date</th>
                            <th rowspan="2">Client Name</th>
                            <th rowspan="2">Page Number</th>
                            <th rowspan="2">Newspaper Name</th>
                            <th rowspan="2">State</th>
                            <th rowspan="2">Edition</th>
                            <th rowspan="2">DAVP Rates<br> per sq cm <br>in Rs</th>
                            <th rowspan="2" id="extraColumnHeader" style="display: none;">Colour <br>40% Extra</th>
                            <th rowspan="2">Language</th>
                            <th rowspan="2">RO Number</th>
                            <th rowspan="2">RO Date</th>
                            <th rowspan="2">Date of <br>publication</th>
                            <th colspan="2">Size</th>
                            <th rowspan="2">Size in <br>cm2</th>
                            <th rowspan="2">Total Amount <br>Rs</th>
                            <th rowspan="2">Price to <br>Newspaper </th>
                            <th rowspan="2">GST Amount</th>
                            <th rowspan="2">New Payable</th>
                            <th rowspan="2">Email id</th>
                            <th rowspan="2">Phone Number</th>
                        </tr>
                        <tr>
                            <th>Length <br>cm</th>
                            <th>Breadth <br>cm</th>
                        </tr>
                        </thead>
                        <tbody id="tableBody">
                        <!-- Rows will be dynamically added here -->
                        </tbody>
                    </table>
                    <button type="button" class="btn btn-primary mb-3" onclick="addRow()">Add Row</button>


                </div>
            </div>
        </div>

        <!-- Preview RO-->
        <div class="tab-pane fade" id="previewRo" role="tabpanel">
            <div class="container-fluid">
                <h2>Preview RO</h2>
                <div>
                    <div id="previewRoContainer" style="display: none;">
                    <table class="table table-sm table-responsive table-bordered table-striped" id="previewRoTable" style="width: 100% !important;">
                        <thead>
                        <tr>
                            <th>Action</th>
                            <th>Date of Publication</th>
                            <th>RO Date</th>
                            <th>Newspaper Name</th>
                            <th>Submission Date</th>
                            <th>Client Name</th>
                            <th>Page Number</th>
                            <th>State</th>
                            <th>Edition</th>
                            <th>DAVP Rates per sq cm in Rs</th>
                            <th>Colour 40% Extra</th>
                            <th>Language</th>
                            <th>RO Number</th>
                            <th>Length (cm)</th>
                            <th>Breadth (cm)</th>
                            <th>Size in cm²</th>
                            <th>Total Amount Rs</th>
                            <th>Price to Newspaper</th>
                            <th>GST Amount</th>
                            <th>Net Payable</th>
                            <th>Email ID</th>
                            <th>Phone Number</th>
                        </tr>
                        <tbody id="previewRoTbody">
                        <!-- Rows will be dynamically added here -->
                        </tbody>
                    </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Add Client-->
        <div class="tab-pane fade" id="addClient" role="tabpanel">
            <div class="container-fluid">
                <h2>Add Client</h2>
                <div>
                    <div class="container-fluid">
                        <form action="/addClient" method="POST" id="addClientForm">
                            <div class="row">
                                <!-- Client Name -->
                                <div class="col-md-3 mb-3">
                                    <div class="input-group">
                                        <span class="input-group-text">Client Name</span>
                                        <input type="text" class="form-control uppercase" name="clientName" id="cName" required>
                                    </div>
                                </div>

                                <div class="col-md-3 mb-3">
                                    <div class="input-group">
                                        <span class="input-group-text">Client Short Form</span>
                                        <input type="text" class="form-control" name="clientShortForm" id="cShort" required>
                                    </div>
                                </div>

                                <!-- Submit Button -->
                                <div class="col-md-3 mb-3">
                                    <button type="submit" id="submitBtn" class="btn btn-primary">Submit</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Generate RO For Release Tab -->
        <div class="tab-pane fade" id="generateRO" role="tabpanel">
            <h2>Generate RO For Release</h2>
            <div class="d-flex no-print">
                <div class="col-md-3 mb-3" >
                    <div class="input-group">
                        <span class="input-group-text">client Name</span>
                        <select class="form-select" name="client" id="client">
                            <option value="" selected disabled >Select the client Name</option>
                        </select>
                    </div>
                </div>

                <div class="col-md-3 mb-3 no-print" >
                    <div class="input-group">
                        <span class="input-group-text">Submission Date</span>
                        <input type="date" class="form-control" id="SubmissionDate" name="SubmissionDate" />
                    </div>
                </div>

                <div class="col-md-3 mb-3 no-print" >
                    <div class="input-group">
                        <span class="input-group-text">RO Date</span>
                        <input type="date" class="form-control" id="roDate" name="SubmissionDate" />
                    </div>
                </div>
            </div>

            <div class="container-fluid mt-4">
                <!-- Header -->
                <div class="row">
                    <div class="col-6">
                        <div class="row">
                            <div class="col-6">
                                <h4>NEERAJ COMMUNICATION</h4>
                            </div>
                            <div class="col-6">
                                <p>(INS Accredited Agency)</p>
                            </div>
                        </div>
                        <p>9, Apex Chamber 19, Vidhan Sabha Marg, Lucknow-226001</p>
                        <p>Tele: 0522-4025804 | Mobile: 08318523654, 09838893800</p>
                        <p>Email: <a href="mailto:pankaj@neerajcommunication.com">pankaj@neerajcommunication.com</a></p>
                        <button class="btn btn-primary no-print w-25" onclick="printPage()">Print Page</button>
                    </div>
                    <div class="col-6 d-flex justify-content-end w-50">
                        <table class="table details-table table-bordered w-50">
                            <thead>
                            <tr>
                                <th>PAN No</th>
                                <td>APJPP7180A</td>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <th>GST No</th>
                                <td>09APJPP7180A2ZQ</td>
                            </tr>
                            <tr>
                                <th>INS Code</th>
                                <td>11251</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <hr>

                <!-- Release Order Info -->
                <h2 class="text-center fw-bold text-decoration-underline">RELEASE ORDER</h2>
                <div class="col-6">
                    <div class="d-flex align-items-center justify-content-between w-50">
                        <div>
                            <h6>RO No.</h6>
                        </div>
                        <div>
                            <p id="roNumber">NC/GOVT/DIPR/2025/996</p>
                        </div>
                    </div>
                    <div class="d-flex align-items-center justify-content-between w-50">
                        <div>
                            <h6>R.O. Date</h6>
                        </div>
                        <div>
                            <p id="roDates">13-Jan-25</p>
                        </div>
                    </div>
                    <div class="d-flex align-items-center justify-content-between w-50">
                        <div>
                            <h6>Publish Date</h6>
                        </div>
                        <div>
                            <p id="publishDate">14-Jan-25</p>
                        </div>
                    </div>
                    <div class="d-flex align-items-center justify-content-between w-50">
                        <div>
                            <h6>Client</h6>
                        </div>
                        <div>
                            <p id="clientInfo">INFORMATION DEPARTMENT UP</p>
                        </div>
                    </div>
                    <div class="d-flex align-items-center justify-content-between w-50">
                        <div>
                            <h6>Page Position</h6>
                        </div>
                        <div>
                            <p id="pagePosition">Page 2 or Page 3</p>
                        </div>
                    </div>
                </div>

                <div class="row mt-4">
                    <div class="col">
                        <table class="table table-bordered">
                            <thead class="table-light">
                            <tr>
                                <th>Size in C.M.</th>
                                <th>Publication</th>
                                <th>Language</th>
                                <th>Edition</th>
                                <th>DAVP Rate per Sq Cm (in Rs.)</th>
                                <th>Colour 40% Extra</th>
                                <th>Size in Sq Cm</th>
                                <th>Total Amount (in Rs.)</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>25×40</td>
                                <td>Sanbad Prathidin</td>
                                <td>Bengali</td>
                                <td>Kolkata</td>
                                <td>59.96</td>
                                <td>23.98</td>
                                <td>1000</td>
                                <td>83944.00</td>
                            </tr>
                            <tr>
                                <td>25×40</td>
                                <td>Sanbad Prathidin</td>
                                <td>Bengali</td>
                                <td>Kolkata</td>
                                <td>59.96</td>
                                <td>23.98</td>
                                <td>1000</td>
                                <td>83944.00</td>
                            </tr>
                            <tr>
                                <td>25×40</td>
                                <td>Sanbad Prathidin</td>
                                <td>Bengali</td>
                                <td>Kolkata</td>
                                <td>59.96</td>
                                <td>23.98</td>
                                <td>1000</td>
                                <td>83944.00</td>
                            </tr>
                            <tr>
                                <td>25×40</td>
                                <td>Sanbad Prathidin</td>
                                <td>Bengali</td>
                                <td>Kolkata</td>
                                <td>59.96</td>
                                <td>23.98</td>
                                <td>1000</td>
                                <td>83944.00</td>
                            </tr>
                            <tr>
                                <td>25×40</td>
                                <td>Sanbad Prathidin</td>
                                <td>Bengali</td>
                                <td>Kolkata</td>
                                <td>59.96</td>
                                <td>23.98</td>
                                <td>1000</td>
                                <td>83944.00</td>
                            </tr>
                            <tr>
                                <td>25×40</td>
                                <td>Sanbad Prathidin</td>
                                <td>Bengali</td>
                                <td>Kolkata</td>
                                <td>59.96</td>
                                <td>23.98</td>
                                <td>1000</td>
                                <td>83944.00</td>
                            </tr>
                            <tr>
                                <td>25×40</td>
                                <td>Sanbad Prathidin</td>
                                <td>Bengali</td>
                                <td>Kolkata</td>
                                <td>59.96</td>
                                <td>23.98</td>
                                <td>1000</td>
                                <td>83944.00</td>
                            </tr>
                            <tr>
                                <td>25×40</td>
                                <td>Sanbad Prathidin</td>
                                <td>Bengali</td>
                                <td>Kolkata</td>
                                <td>59.96</td>
                                <td>23.98</td>
                                <td>1000</td>
                                <td>83944.00</td>
                            </tr>
                            <tr>
                                <td>25×40</td>
                                <td>Sanbad Prathidin</td>
                                <td>Bengali</td>
                                <td>Kolkata</td>
                                <td>59.96</td>
                                <td>23.98</td>
                                <td>1000</td>
                                <td>83944.00</td>
                            </tr>
                            <tr>
                                <td>25×40</td>
                                <td>Sanbad Prathidin</td>
                                <td>Bengali</td>
                                <td>Kolkata</td>
                                <td>59.96</td>
                                <td>23.98</td>
                                <td>1000</td>
                                <td>83944.00</td>
                            </tr>
                            <tr>
                                <td>25×40</td>
                                <td>Sanbad Prathidin</td>
                                <td>Bengali</td>
                                <td>Kolkata</td>
                                <td>59.96</td>
                                <td>23.98</td>
                                <td>1000</td>
                                <td>83944.00</td>
                            </tr>
                            <tr>
                                <td>25×40</td>
                                <td>Sanbad Prathidin</td>
                                <td>Bengali</td>
                                <td>Kolkata</td>
                                <td>59.96</td>
                                <td>23.98</td>
                                <td>1000</td>
                                <td>83944.00</td>
                            </tr>
                            <tr>
                                <td>25×40</td>
                                <td>Sanbad Prathidin</td>
                                <td>Bengali</td>
                                <td>Kolkata</td>
                                <td>59.96</td>
                                <td>23.98</td>
                                <td>1000</td>
                                <td>83944.00</td>
                            </tr>
                            <tr>
                                <td>25×40</td>
                                <td>Sanbad Prathidin</td>
                                <td>Bengali</td>
                                <td>Kolkata</td>
                                <td>59.96</td>
                                <td>23.98</td>
                                <td>1000</td>
                                <td>83944.00</td>
                            </tr>
                            <tr>
                                <td>25×40</td>
                                <td>Sanbad Prathidin</td>
                                <td>Bengali</td>
                                <td>Kolkata</td>
                                <td>59.96</td>
                                <td>23.98</td>
                                <td>1000</td>
                                <td>83944.00</td>
                            </tr>
                            <tr>
                                <td>25×40</td>
                                <td>Sanbad Prathidin</td>
                                <td>Bengali</td>
                                <td>Kolkata</td>
                                <td>59.96</td>
                                <td>23.98</td>
                                <td>1000</td>
                                <td>83944.00</td>
                            </tr>
                            <tr>
                                <td>25×40</td>
                                <td>Sanbad Prathidin</td>
                                <td>Bengali</td>
                                <td>Kolkata</td>
                                <td>59.96</td>
                                <td>23.98</td>
                                <td>1000</td>
                                <td>83944.00</td>
                            </tr>
                            <tr>
                                <td>25×40</td>
                                <td>Sanbad Prathidin</td>
                                <td>Bengali</td>
                                <td>Kolkata</td>
                                <td>59.96</td>
                                <td>23.98</td>
                                <td>1000</td>
                                <td>83944.00</td>
                            </tr>
                            <!-- Financial Details -->
                            <tr>
                                <td colspan="5"></td>
                                <th colspan="2" class="text-center">Amount</th>
                                <td>83944.00</td>
                            </tr>
                            <tr>
                                <td colspan="5"></td>
                                <th colspan="2" class="text-center">Agency Comm. 15%</th>
                                <td>12591.60</td>
                            </tr>
                            <tr>
                                <td colspan="5"></td>
                                <th colspan="2" class="text-center">Taxable Amount</th>
                                <td>71352.40</td>
                            </tr>
                            <tr>
                                <td colspan="5"></td>
                                <th colspan="2" class="text-center">CGST 2.5%</th>
                                <td>1783.81</td>
                            </tr>
                            <tr>
                                <td colspan="5"></td>
                                <th colspan="2" class="text-center" >SGST 2.5%</th>
                                <td>1783.81</td>
                            </tr>
                            <tr>
                                <td colspan="5"></td>
                                <th colspan="2" class="text-center">Net Total (Round Off)</th>
                                <td>74920.00</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>



                <!-- Notes -->
                <div class="row">
                    <div class="col-6">
                        <div class="row notes">
                            <div class="col">
                                <p><strong>Note:</strong></p>
                                <ol>
                                    <li>The newspaper advertisement should be printed on the publish date newspaper.</li>
                                    <li>The creative of the given size is attached within the email. If not, then please let us know immediately.</li>
                                    <li>The advertisement design should be printed exactly as given in the creative PDF.</li>
                                    <li>If the advertisement size, colour, or quality is not up to the mark, it will affect the payment.</li>
                                    <li>The advertisement should also be released in the Dark Edition.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <!-- Footer -->
                        <div class="row">
                            <div class="col">
                                <p><strong>For Neeraj Communication</strong></p>
                                <div class="rectangle-container">
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

            </div>
        </div>

        <!-- Services Tab -->
        <div class="tab-pane fade" id="services" role="tabpanel">
            <h2>Services</h2>
            <p>Explore the services we provide and find the one that suits your needs.</p>
        </div>

        <!-- Contact Tab -->
        <div class="tab-pane fade" id="contact" role="tabpanel">
            <h2>Contact</h2>
            <p>Get in touch with us for any inquiries or support.</p>
        </div>
    </div>
</div>

<div id="loader" style="display: none;">
    <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
    </div>
</div>

<!-- Bootstrap 5.3 JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

<!-- Bootstrap 5.3 JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

<!-- SweetAlert2 JS -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<!-- Self Defined JavaScript -->
<script src="/js/common.js"></script>

<!--js For View Master-->
<script>
    // Function to load data into the table when the "View Master" tab is clicked
    document.getElementById('viewMasterTab').addEventListener('click', function () {
        fetchNewspaperData(); // Fetch data when the tab is clicked
    });

    // Function to fetch data from backend and populate the table
    function fetchNewspaperData() {
        // Show the loader and hide the table
        document.getElementById('loader').style.display = 'block';
        document.getElementById('tableContainer').style.display = 'none';

        // Perform AJAX request to fetch the data from the backend
        fetch('/api/newspapersMaster')
            .then(response => response.json())  // Assuming the response is a JSON array
            .then(data => {
                console.log(data);  // Log the response to check its structure
                let tableBody = document.getElementById('viewTable');
                tableBody.innerHTML = ''; // Clear the table body before adding new rows

                // Check if 'data' is an array
                if (Array.isArray(data)) {
                    // Loop through the fetched data and append rows to the table
                    data.forEach(newspaper => {
                        let row = document.createElement('tr');
                        row.innerHTML = `
                        <td>${newspaper.newspaperCode}</td>
                        <td>${newspaper.newspaperName}</td>
                        <td>${newspaper.lastRenewedDate}</td>
                        <td>${newspaper.state}</td>
                        <td>${newspaper.placeOfPublication}</td>
                        <td>${newspaper.language}</td>
                        <td>${newspaper.periodicity}</td>
                        <td>${newspaper.category}</td>
                        <td>${newspaper.regularityStatus}</td>
                        <td>${newspaper.circulationBase}</td>
                        <td>${newspaper.circulation}</td>
                        <td>${newspaper.rate}</td>
                    `;
                        tableBody.appendChild(row);
                    });

                    // Destroy the previous DataTable instance (if exists)
                    if ($.fn.dataTable.isDataTable('#newspapersTable')) {
                        $('#newspapersTable').DataTable().destroy();
                    }

                    // Reinitialize DataTable with paging disabled
                    $('#newspapersTable').DataTable({
                        "paging": false,
                        "searching": true,
                        "info": true
                    });

                    // Hide the loader and show the table
                    document.getElementById('loader').style.display = 'none';
                    document.getElementById('tableContainer').style.display = 'block';
                } else {
                    console.error("Received data is not an array:", data);
                    document.getElementById('loader').style.display = 'none';
                }
            })
            .catch(error => {
                console.error('Error fetching newspaper data:', error);
                document.getElementById('loader').style.display = 'none';
            });
    }

</script>

<!--js For Preview RO -->
<script>
    // Function to load data into the table when the "View Master" tab is clicked
    document.getElementById('previewRoTab').addEventListener('click', function () {
        fetchRoData(); // Fetch data when the tab is clicked
    });

    // Function to fetch data from backend and populate the table
    function fetchRoData() {
        // Show the loader and hide the table
        document.getElementById('loader').style.display = 'block';
        document.getElementById('previewRoContainer').style.display = 'none';

        // Perform AJAX request to fetch the data from the backend
        fetch('/api/fetchRoData')
            .then(response => response.json())  // Assuming the response is a JSON array
            .then(data => {
                console.log(data);  // Log the response to check its structure
                let tableBody = document.getElementById('previewRoTbody');
                tableBody.innerHTML = ''; // Clear the table body before adding new rows

                // Check if 'data' is an array
                if (Array.isArray(data)) {
                    // Loop through the fetched data and append rows to the table
                    data.forEach(roData => {
                        let row = document.createElement('tr');
                        row.innerHTML = `
                          <td>
                            <button class="btn btn-primary" onclick="navigateToForm(${roData.id})">Release Ro</button>
                        </td>
                            <td>${roData.dateOfPublication || ''}</td>
                                <td>${roData.roDate || ''}</td>
                                    <td>${roData.newspaperName || ''}</td>
    <td>${roData.submissionDate || ''}</td>
    <td>${roData.clientName || ''}</td>
    <td>${roData.pageNumber || ''}</td>
    <td>${roData.state || ''}</td>
    <td>${roData.edition || ''}</td>
    <td>${roData.dav || ''}</td>
    <td>${roData.color || ''}</td>
    <td>${roData.language || ''}</td>
    <td>${roData.roNumber || ''}</td>
    <td>${roData.length || ''}</td>
    <td>${roData.breadth || ''}</td>
    <td>${roData.totalSize || ''}</td>
    <td>${roData.amount || ''}</td>
    <td>${roData.priceToNewsPaper || ''}</td>
    <td>${roData.gst || ''}</td>
    <td>${roData.netPayable || ''}</td>
    <td>${roData.emailId || ''}</td>
    <td>${roData.phoneNumber || ''}</td>
`;
                        tableBody.appendChild(row);

                    });

                    // Destroy the previous DataTable instance (if exists)
                    if ($.fn.dataTable.isDataTable('#previewRoTable')) {
                        $('#previewRoTable').DataTable().destroy();
                    }

                    // Reinitialize DataTable with paging disabled
                    $('#previewRoTable').DataTable({
                        "paging": false,
                        "searching": true,
                        "info": true
                    });

                    // Hide the loader and show the table
                    document.getElementById('loader').style.display = 'none';
                    document.getElementById('previewRoContainer').style.display = 'block';
                } else {
                    console.error("Received data is not an array:", data);
                    document.getElementById('loader').style.display = 'none';
                }
            })
            .catch(error => {
                console.error('Error fetching newspaper data:', error);
                document.getElementById('loader').style.display = 'none';
            });
    }

    // Function to navigate to the "Create RO" tab and pre-fill the data
    function navigateToForm(id) {
        const createRoTab = new bootstrap.Tab(document.querySelector('a[href="#generateRO"]'));
        createRoTab.show();

        // Fetch the data by ID and pre-fill the form
        fetch(`/api/getRoDataById/${id}`)
            .then(response => response.json())
            .then(data => {

                console.log("Prefilled Data ",data);

                    // // Prefill the form fields with the fetched data
                    document.getElementById('client').value = data.clientName || '';
                    document.getElementById('SubmissionDate').value = data.submissionDate || '';
                    document.getElementById('roDate').value = data.roDate || '';

                document.getElementById('roNumber').textContent = data.roNumber || '';
                document.getElementById('roDates').textContent = data.roDate || '';
                document.getElementById('publishDate').textContent = data.dateOfPublication || '';
                document.getElementById('clientInfo').textContent = data.clientName || '';
                document.getElementById('pagePosition').textContent = data.pageNumber || '';

            })
            .catch(error => {
                console.error('Error fetching data for pre-filling:', error);
            });
    }

</script>

<!--Add Client-->
<script>
    document.getElementById('submitBtn').addEventListener('click', function(event) {
        event.preventDefault(); // Prevent the default form submission

        // Collect form data
        const clientName = document.getElementById('cName').value;
        const clientShortForm = document.getElementById('cShort').value;

        // Check if the fields are not empty
        if (clientName && clientShortForm) {
            // Create an object with the data
            const clientData = {
                clientName: clientName,
                clientShortForm: clientShortForm
            };

            // Show a loader or disable the submit button while submitting
            document.getElementById('submitBtn').disabled = true;

            // Send data to the backend API
            fetch('/api/addClient', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(clientData)
            })
                .then(response => response.text()) // Get the response as plain text
                .then(message => {
                    // Handle the response message from the backend
                    console.log(message);  // Log the message to check its content

                    if (message === 'Client Added Successfully') {
                        // Success message using SweetAlert2
                        Swal.fire({
                            icon: 'success',
                            title: 'Client Added!',
                            text: message,
                            confirmButtonText: 'OK'
                        });

                        // Optionally, clear the form
                        document.getElementById('addClientForm').reset();
                    } else {
                        // Error message using SweetAlert2
                        Swal.fire({
                            icon: 'error',
                            title: 'Error',
                            text: message,
                            confirmButtonText: 'Try Again'
                        });
                    }

                    // Re-enable the submit button
                    document.getElementById('submitBtn').disabled = false;
                })
                .catch(error => {
                    console.error('Error:', error);
                    document.getElementById('submitBtn').disabled = false;
                });
        } else {
            // If fields are empty, show an alert using SweetAlert2
            Swal.fire({
                icon: 'warning',
                title: 'Incomplete Form',
                text: 'Please fill in all fields.',
                confirmButtonText: 'OK'
            });
        }
    });

</script>

</body>
</html>
